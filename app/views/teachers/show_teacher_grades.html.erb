<% if @all_grades == NIL %>
  <h3 class="alert alert-danger">Permission Denied: pristupujete ku známkam iného žiaka.</h3>
<% else %>
  <div class="row">
    <div class="col-lg-4 pt-3 pl-5 pr-5 bg-light height-max">
      <h1 class="display-4">
        Výpis udeľených známok
        <b><%= Teacher.find(params[:teach_id].to_i).name %></b>
      </h1>
      <p class="text-muted">Prehľad známok jednotlivých predmetov.</p>
      <hr>
      <h6>Pridaj známku</h6>

      <%= render 'add_grade_form', grade: @all_grades %>

    </div>
    <div class="col-lg-8 pt-3 pr-5 height-max">
      <div style="margin-bottom: 10px; text-align: right">
        <button class="btn btn-success" id="btnExport">Exportovať</button>
      </div>
      <table class="table table-sm" id="tableWrapper">
        <thead class="thead-red">
        <tr>
          <th scope="col">Žiak</th>
          <th scope="col">Trieda</th>
          <th scope="col">Predmet</th>
          <th scope="col">Znamka</th>
          <th scope="col">Dátum</th>
        </tr>
        </thead>
        <tbody>
        <% @all_grades.each do |znamky| %>
          <tr>
            <th scope="row"><%= znamky.fetch('stname') %></th>
            <td><%= znamky.fetch('trname') %></td>
            <td><%= znamky.fetch('prname') %></td>
            <td><%= znamky.fetch('znamka') %></td>
            <td><%= znamky.fetch('datum') %></td>
          </tr>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
<% end %>

